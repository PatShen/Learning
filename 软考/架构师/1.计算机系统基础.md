# 计算机系统组成

* RAM：掉电后数据丢失（DRAM：动态刷新，内存（主存））
* ROM：断电数据不丢失

* 高速缓存：CPU-内存之间，按内容存取（相联存储器）

* 层次化存储划分
* 文件存放在外存
* 局部性原理
  * 时间局部性（持续在使用），执行后不久还会被执行
  * 空间局部性，一旦访问了某个存储单元，附近的单元也可能被访问
 
数据传输方式

* 程序控制（查询）方式：CPU和I/O传输不能并行
* 程序中断：断点，保存现场（栈），恢复现场（CPU和I/O传输可并行）（键鼠）
* DMA：直接内存存取。（CPU和I/O传输可并行）（U盘、移动硬盘等）做初始化，后续所有控制交给DMAC

# 操作系统

## 进程管理

程序，进程，线程

> 文件可以被共享，某个线程的栈指针无法与其他线程共享

### 进程状态

> 一般情况下，系统都是非抢占式、无剥夺调度
> 抢占式调度：优先执行优先级高的任务、事件

### 同步与互斥

互斥：间接制约（因为资源不足）

临界资源：打印机，缓冲区

### PV操作，前趋图

* 信号量：全局变量
* 原语（P操作，V操作）：多个步骤，要么都做，要么都不做
* 信号量初始值，为最大，表示没有任何操作时的资源总数
* 同一个信号量成对存在，可以跨进程

* 前驱：P操作。后继：V操作。

**死锁**：资源够用就不会死锁

**银行家算法**：如何分配资源

# 磁盘管理，文件管理

## 段、页存储
外存 -> 内存（统一编址，虚拟存储体系）

> 逻辑地址和物理地址转换：页内地址照抄，页号查表可得。

> 十六进制，一位十六进制，对应四位二进制
> 1110 -> E

页内地址在低位，页号、段号在高位。

## 磁盘管理

单缓冲区

## 文件系统 

* 索引文件结构：目录，指针，地址项，磁盘块号。
* 索引：默认13个节点。
 * 地址项：4B
 * 前10个节点都是直接索引：指向的物理（数据）块，直接存放文件数据。[0, 9]，（10个，连续）。
* 一级间接索引，[10, 265]（256个）
* 二级间接索引，2^16*（256^2，65536个）
* 三级间接索引，256^3

## 位视图

记录文件空闲情况

# 系统性能
